<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Java设计模式学习笔记 | Yue C.H. Site</title><meta name="author" content="Yue C.H."><meta name="copyright" content="Yue C.H."><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="[TOC]  设计模式概述 设计模式目的  编写过程中，程序员面临着耦合性，内聚性以及可维护性，可扩展性，重用性，灵活性等多方面的挑战，设计模式是为了让程序具有更好：  代码重用性 可读性 可靠性 是程序具有低耦合性，高内聚性  设计模式七大原则：  单一职责原则 接口隔离原则 依赖倒转原则（面向接口编程） 里氏替换原则 开闭原则 迪米特法则 合成复用原则   七大原则 单一职责原则  基本介绍：">
<meta property="og:type" content="article">
<meta property="og:title" content="Java设计模式学习笔记">
<meta property="og:url" content="https://ychhh-1114.github.io/2022/03/23/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Yue C.H. Site">
<meta property="og:description" content="[TOC]  设计模式概述 设计模式目的  编写过程中，程序员面临着耦合性，内聚性以及可维护性，可扩展性，重用性，灵活性等多方面的挑战，设计模式是为了让程序具有更好：  代码重用性 可读性 可靠性 是程序具有低耦合性，高内聚性  设计模式七大原则：  单一职责原则 接口隔离原则 依赖倒转原则（面向接口编程） 里氏替换原则 开闭原则 迪米特法则 合成复用原则   七大原则 单一职责原则  基本介绍：">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ychhh-1114.github.io/img/a.jpg">
<meta property="article:published_time" content="2022-03-23T11:12:11.000Z">
<meta property="article:modified_time" content="2024-04-14T09:56:26.400Z">
<meta property="article:author" content="Yue C.H.">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ychhh-1114.github.io/img/a.jpg"><link rel="shortcut icon" href="/img/icon.ico"><link rel="canonical" href="https://ychhh-1114.github.io/2022/03/23/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"XO8L315K7G","apiKey":"2cd73df6ec19fdd7f3b0cab2fd056b89","indexName":"blog","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true  //是否显示滚动进度百分比,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Java设计模式学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-14 17:56:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><style type="text/css">#toggle-sidebar {bottom: 80px}</style><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/a.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/default_page.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Yue C.H. Site"><span class="site-name">Yue C.H. Site</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Java设计模式学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-23T11:12:11.000Z" title="发表于 2022-03-23 19:12:11">2022-03-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-04-14T09:56:26.400Z" title="更新于 2024-04-14 17:56:26">2024-04-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Java设计模式学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>[TOC]</p>
<hr />
<h2 id="设计模式概述">设计模式概述</h2>
<h3 id="设计模式目的">设计模式目的</h3>
<ul class="task-list">
<li><p><label><input
type="checkbox" />编写过程中，程序员面临着耦合性，内聚性以及可维护性，可扩展性，重用性，灵活性等多方面的挑战，设计模式是为了让程序具有更好：</label></p>
<ul>
<li>代码重用性</li>
<li>可读性</li>
<li>可靠性</li>
<li>是程序具有低耦合性，高内聚性</li>
</ul></li>
<li><p><label><input type="checkbox" />设计模式七大原则：</label></p>
<ul>
<li>单一职责原则</li>
<li>接口隔离原则</li>
<li>依赖倒转原则（面向接口编程）</li>
<li>里氏替换原则</li>
<li>开闭原则</li>
<li>迪米特法则</li>
<li>合成复用原则</li>
</ul></li>
</ul>
<h3 id="七大原则">七大原则</h3>
<h4 id="单一职责原则">单一职责原则</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />基本介绍：对类来说，一个单一类只负责一个职责。若一个类负责多个值则，如：类A拥有这则1和值则2，当值则1发生改变而影响类A，则可能导致值则2的错误，所以需要将类A颗粒化为类A1和类A2</label></li>
<li><label><input type="checkbox" />单一职责注意事项：</label>
<ul>
<li>降低类的复杂度，一个类只负责一个职责</li>
<li>提高类的可读性，可维护性</li>
<li>降低变更引起的风险</li>
<li>通常情况下需要遵守单一职责的原则，但在类的方法特别少的情况下可以不遵守单一职责</li>
</ul></li>
<li><label><input type="checkbox" /><strong>Attention</strong>:</label>
<ul>
<li><strong>对于if...else语句需要谨慎使用，if...else使得代码的耦合程度太高</strong>，在必须使用if...else...时考虑使用构造方法或构造类的形式来代替if...else</li>
</ul></li>
</ul>
<h4 id="接口隔离原则">接口隔离原则</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>客户端不应该依赖不需要的接口，即一个类对另一个类的依赖需要建立在最小耦合的接口之上</li>
</ul></li>
<li><label><input
type="checkbox" />解决方法：若发生了接口的冗余，则通过接口的分解方式，将一个接口分解为多个子接口</label></li>
</ul>
<p><img src="C:\Users\Y_ch\Desktop\some_md\picLib\3.jpg" /></p>
<p><img src="C:\Users\Y_ch\Desktop\some_md\picLib\4.jpg" /></p>
<h4 id="依赖倒转原则面向接口编程">依赖倒转原则（面向接口编程）</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>高层模块不应该依赖于低层模块，二者都应该依赖于其抽象</li>
<li>抽象不应该依赖细节，细节应该依赖于抽象</li>
<li>依赖倒转即面向接口编程</li>
</ul></li>
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>底层模块尽量有抽象类或接口或两者都有，这样使得程序的稳定性更好</li>
<li>变量的声明类型尽量是抽象类或接口，这样使得变量引用和实际对象间有一层缓冲层，有利于程序的扩展和优化</li>
<li>继承时遵循里氏替换原则</li>
</ul></li>
</ul>
<h4 id="里氏替换原则">里氏替换原则</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<blockquote>
<p>如果对每个类型为T1的对象o1，有每个类型为T2的对象o2，若将程序所有为o1的地方改为o2,则程序不发生改动，则T2时T1的子类。<strong>即引用基类的地方都能透明的使用子类</strong></p>
</blockquote>
<ul>
<li>在使用继承时子类尽量不要重写父类方法</li>
<li>继承使两个类的耦合程度增强了，在适当的情况下可以通过<strong>聚合，组合，依赖</strong>来解决</li>
</ul></li>
<li><p><label><input type="checkbox" />对于继承的解耦合：</label></p>
<ul>
<li>将原来的继承关系进行接触</li>
<li>创建一个公共的Base类，最抽象的类，使原先具有继承关系的两个类都来继承这个类</li>
<li>在其中一个类里（一般为当初的子类），创建（当初父类）变量</li>
<li>使用该对象的方法</li>
</ul></li>
</ul>
<h4 id="开闭原则">开闭原则</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<blockquote>
<ul>
<li><strong>对扩展（提供者）开放，对修改（使用者）封闭</strong>。用抽象扩展框架，用实现修改细节</li>
<li>当软件的需求发生变化时尽量通过软件的实体行为来发生变化，而不是通过修改已有的代码来实现</li>
<li>编程中遵循的其他原则，以及设计模式的目的就是遵循开闭原则</li>
</ul>
</blockquote></li>
<li><p><label><input type="checkbox" />解决方法：</label></p>
<ul>
<li>通过实现接口和抽象类来将实体进行抽离</li>
<li>在实现的接口的子类或实现抽象类的子类中进行细节化，从而降低了耦合性</li>
</ul></li>
</ul>
<h4 id="迪米特法则">迪米特法则</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li><p>一个类应对其他类保持最小的了解</p></li>
<li><p>类与类之间的关系越密切，其耦合度越大</p></li>
<li><p>迪米特法则：</p>
<blockquote>
<p>即最少知到原则，一个类对自己依赖的类知到越少越好。也就是说，不管被依赖的类有多复杂，都尽量封装自己类内部，对外只提供public方法接口</p>
<ul>
<li><strong>直接朋友：在类 的内部直接调用、声明、使用的类</strong></li>
<li><strong>简介朋友：在方法的内部声明的局部变量（此时违反了迪米特法则）</strong></li>
</ul>
</blockquote></li>
</ul></li>
<li><p><label><input type="checkbox" />个人理解：</label></p>
<ul>
<li>即设计需要按照一定的拓扑关系，不能越级调用，需要按照流程来执行想要的功能</li>
</ul></li>
<li><p><label><input type="checkbox" />注意事项：</label></p>
<ul>
<li>迪米特法则只要求降低耦合而不是完全没有耦合</li>
</ul></li>
</ul>
<h4 id="合成复用原则">合成复用原则</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />基本介绍：能够使用合成/聚合的方式就不要使用继承</label></li>
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>找出可能变化之处，并将其独立出来</li>
<li><strong>针对接口编程，而不是针对实现编程</strong></li>
<li>为了交互对象而实现松耦合</li>
</ul></li>
</ul>
<h3 id="uml类图">UML类图</h3>
<ul class="task-list">
<li><p><label><input
type="checkbox" />类和类之间的关系：依赖，泛化，实现，关联，聚合，组合</label></p>
<ul>
<li><p>依赖：</p>
<p>只要是在类中<strong>用到了</strong>对方就存在依赖关系（最基本的类之间的关系，如果没有这个类，连编译都通过不了）</p></li>
<li><p>泛化（继承）:</p>
<p>依赖关系的特例</p></li>
<li><p>实现：</p>
<p>实现接口，实现关系也为依赖关系</p></li>
<li><p>关联：</p>
<ol type="1">
<li>表示类与类之间的特例也为依赖关系</li>
<li>关联具有导航性，即一对一或是一对多</li>
</ol>
<p>一对一：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mermaid"><br>classDiagram<br>	class Person&#123;<br>		IDCard card;<br>	&#125;<br></code></pre></td></tr></table></figure>
<p>双向一对一：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Person&#123;<br>		IDCard card;<br>	&#125;<br>	<br>	class IDCard&#123;<br>		Person person;<br>	&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>聚合:</p>
<p>​ 各部分成员之间可以分离，既可以独立存在</p>
<p>​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	Computer &lt;|-- Keyboard<br>	Computer &lt;|-- Mouse<br><br>	class Computer&#123;<br>		Mouse mouse;<br>		Keyboard board;<br>	&#125;<br>	<br>	class Keyboard&#123;<br>	<br>	&#125;<br>	<br>	class Mouse&#123;<br>	<br>	&#125;<br>	<br></code></pre></td></tr></table></figure></li>
<li><p>组合：</p>
<p>​ 各部分成员之间不可以分离，即不可以独立存在，必须共生共灭</p>
<p>​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class People&#123;<br>		Head head = new Head();<br>		Nose nose = new Nose();<br>		<br>	&#125;<br></code></pre></td></tr></table></figure></li>
</ul></li>
</ul>
<h3 id="设计模式">设计模式</h3>
<h4 id="基本概念">基本概念</h4>
<ul class="task-list">
<li><label><input type="checkbox" />设计模式分为三类，共23种：</label>
<ol type="1">
<li><strong><em>创建型模式</em></strong>：
<ul>
<li><strong>单例模式</strong></li>
<li>抽象工厂模式</li>
<li>原型模式</li>
<li>建造者模式</li>
<li><strong>工厂模式</strong></li>
</ul></li>
<li><strong><em>结构型模式</em></strong>：
<ul>
<li>适配器模式</li>
<li>桥接模式</li>
<li><strong>装饰模式</strong></li>
<li>组合模式</li>
<li>外观模式</li>
<li>享元模式</li>
<li>代理模式</li>
</ul></li>
<li><strong><em>行为型模式</em></strong>：
<ul>
<li>模板方法模式</li>
<li>命令模式</li>
<li>访问者模式</li>
<li>迭代器模式</li>
<li><strong>观察者模式</strong></li>
<li>中介者模式</li>
<li>备忘录模式</li>
<li>解释器模式</li>
<li>状态模式</li>
<li>策略模式</li>
<li><strong>职责链模式</strong></li>
</ul></li>
</ol></li>
</ul>
<h4 id="单例模式">单例模式</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />概念：单例模式即在软件系统中，对某个类只能存在一个对象，并且该类只提供一个取个该实例的方法（静态方法）</label></li>
</ul>
<h5 id="饿汉式">饿汉式</h5>
<ol type="1">
<li><p>静态常量写法</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hungry1</span>&#123;<br>    <span class="hljs-comment">// 隐藏构造器，使得类外无法创建对象	</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Hungry1</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br>    <span class="hljs-comment">// 创建静态对象</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span>  <span class="hljs-keyword">private</span> <span class="hljs-type">Hungry1</span> <span class="hljs-variable">h1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry1</span>();<br><br>    <span class="hljs-comment">// 提供静态对象接口</span><br>    <span class="hljs-keyword">static</span> Hungry1 <span class="hljs-title function_">getHungrt</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> h1;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></p>
<ul class="task-list">
<li><label><input
type="checkbox" />优点：在类装载的时候就完成了实例化，避免了线程同步问题</label></li>
<li><label><input
type="checkbox" />缺点：在类装载的过程中就完成了实例化，没有达到lazyloading的效果。如果从未使用过该实例，则会造成内存的浪费。这种基于ClassLoader的机制避免了多线程问题，但导致类加载的方式有很多，，因此不能确定其他方式不会造成类的加载，从而无法达到lazyloading</label></li>
</ul></li>
<li><p>静态代码块写法</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hungry1</span>&#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-title function_">Hungry1</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>	<br>	<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span>  <span class="hljs-keyword">private</span> Hungry1 h1;<br>	<br>	<span class="hljs-keyword">static</span> &#123;<br>		h1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry1</span>();<br>	&#125;<br>	<br>	<br>	<span class="hljs-keyword">static</span> Hungry1 <span class="hljs-title function_">getHungrt</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> h1;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></p>
<ul class="task-list">
<li><label><input type="checkbox" />优缺点同上</label></li>
</ul></li>
</ol>
<h5 id="懒汉式">懒汉式</h5>
<ol type="1">
<li><p>线程不安全方式</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hungry2</span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Hungry2</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">private</span>  Hungry2 h2;<br><br>    <span class="hljs-keyword">static</span> Hungry2 <span class="hljs-title function_">getHungry</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(h2 == <span class="hljs-literal">null</span>) &#123;<br>            h2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry2</span>();<br>            <span class="hljs-keyword">return</span> h2;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> h2;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></p>
<ul class="task-list">
<li><p><label><input
type="checkbox" />优点：起到了lazyloading的效果</label></p></li>
<li><p><label><input
type="checkbox" />缺点：只能在单线程下使用，但是由于存在</label></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span>(h2 == <span class="hljs-literal">null</span>) &#123;<br>          h2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry2</span>();<br>          <span class="hljs-keyword">return</span> h2;<br>      &#125;<br></code></pre></td></tr></table></figure>
<p>语句，所以存在线程安全问题，不可以在多线程并发的执行（除非专门控制并发）</p></li>
<li><p><label><input
type="checkbox" />注意事项：在开发过程中尽量不要使用该方式实现单例模式</label></p></li>
</ul></li>
</ol>
<p>​<br />
2. 线程安全式（同步方法方式）</p>
<p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hungry2</span>&#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-title function_">Hungry2</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>	<br>	<span class="hljs-keyword">static</span> <span class="hljs-keyword">private</span>  Hungry2 h2;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> Hungry2 <span class="hljs-title function_">getHungry</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">if</span>(h2 == <span class="hljs-literal">null</span>) &#123;<br>			h2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry2</span>();<br>			<span class="hljs-keyword">return</span> h2;<br>		&#125;<br>		<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> h2;<br>	&#125;<br>&#125;<br><span class="hljs-comment">// 添加syn关键字，保证线程安全</span><br></code></pre></td></tr></table></figure></p>
<ul class="task-list">
<li><label><input
type="checkbox" />优点：保证了线程的同步，解决了线程不安全的问题</label></li>
<li><label><input
type="checkbox" />缺点：使程序的效率变低，需要互斥的执行该函数</label></li>
</ul>
<ol start="3" type="1">
<li><p>线程安全式（同步代码块形式）</p>
<p>错误方式，不存在！！！！</p></li>
</ol>
<h5 id="双重检查">双重检查</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hungry3</span>&#123;<br>	<br>	<span class="hljs-keyword">private</span> <span class="hljs-title function_">Hungry3</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>	<br>	<span class="hljs-keyword">static</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> Hungry3 h3;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Hungry3 <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">if</span>(h3 == <span class="hljs-literal">null</span>) &#123;<br>			<span class="hljs-keyword">synchronized</span> (Hungry3.class) &#123;<br>				<span class="hljs-keyword">if</span>(h3 == <span class="hljs-literal">null</span>)h3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hungry3</span>();<br>				<br>			&#125;<br>		&#125;<br>		<span class="hljs-keyword">return</span> h3;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />优点：Double-Check概念是多线程经常用到的单例方法，进行了两次的null值判断且使用了syn关键词进行同步，既保证了线程安全又保证了高效的处理和懒加载</label></li>
</ul>
<h5 id="静态内部类">静态内部类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInnerClass</span> &#123;<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br><br>&#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Static</span>&#123;<br>	<span class="hljs-keyword">private</span> <span class="hljs-title function_">Static</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>	<br>	<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticInner</span>&#123;<br>		<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Static</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Static</span>();<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Static <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> StaticInner.instance;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />由于静态内部类的特殊性，在外部类装载的时候内部类不会进行装载，因此保证了懒加载，又因为内部类只会装载一次，因此保证了线程的安全</label></li>
</ul>
<h5 id="枚举类">枚举类</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> SingleInstance;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumClass</span> &#123;<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">Enum</span> <span class="hljs-variable">e1</span> <span class="hljs-operator">=</span> Enum.Instance;<br>		<span class="hljs-type">Enum</span> <span class="hljs-variable">e2</span> <span class="hljs-operator">=</span> Enum.Instance;<br>		System.out.println(e1 == e2);<br>	&#125;<br><br>&#125;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Enum</span>&#123;<br>	Instance();<br>	<br>	<span class="hljs-keyword">private</span> <span class="hljs-title function_">Enum</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>	<br>	<br>&#125;<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />枚举类的机制保证了线程的安全</label></li>
</ul>
<h5 id="单例模式注意">单例模式注意</h5>
<ul class="task-list">
<li><p><label><input
type="checkbox" />单例模式保证了系统内存内只有一个对象，对于需要频繁创建和销毁的对象，使用单例模式可以提高系统的效率</label></p></li>
<li><p><label><input
type="checkbox" />想要实例化一个单例时，使用的是相应的获取方法而不是使用new</label></p></li>
<li><p><label><input type="checkbox" />单例模式使用的场景：</label></p>
<ul>
<li><p>需要频繁创建和销毁对象的场景</p></li>
<li><p>创建对象耗时或耗费资源过多但又经常用到的对象</p>
<blockquote>
<p>若能确保单线程的情况下：饿汉式（静态常量、静态代码块）</p>
<p>多线程情况下：双重检查，枚举类，静态内部类</p>
</blockquote></li>
</ul></li>
</ul>
<h4 id="工厂模式">工厂模式</h4>
<h5 id="简单工厂模式">简单工厂模式</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Pizza&#123;<br>		Attributes<br>	&#125;<br>	<br>	class OrderPizza&#123;<br>		Factory factory;<br>	&#125;<br>	<br>	class Factory&#123;<br>		Pizza getPizza()<br>	&#125;<br>	<br>	class BJPizza&#123;<br>	<br>	&#125;<br>	<br>	class TJPizza&#123;<br>	<br>	&#125;<br>	<br>	<br>	Pizza &lt;|-- TJPizza<br>	Pizza &lt;|-- BJPizza<br>	<br>	<br>	Factory &lt;| -- BJPizza<br>	Factory &lt;| -- TJPizza<br>	OrderPizza &lt;|-- Factory<br>	Factory &lt;|-- OrderPizza<br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.SimpleFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		 <span class="hljs-keyword">if</span>(name.equals(<span class="hljs-string">&quot;BJ&quot;</span>) || name.equals(<span class="hljs-string">&quot;TJ&quot;</span>))<br>			 pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pizza</span>(name);<br>		 <br>		 <span class="hljs-keyword">return</span> pizza;<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.SimpleFactory;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br>	<br>	<span class="hljs-keyword">private</span> <span class="hljs-type">Factory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Factory</span>();<br>	<span class="hljs-keyword">private</span> <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>	<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getPizza</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;BJ&quot;</span>;<br>		<br>		pizza = factory.getPizza(name);<br>		<br>		<span class="hljs-keyword">if</span>(pizza == <span class="hljs-literal">null</span>)<br>			System.out.println(<span class="hljs-string">&quot;no&quot;</span>);<br>		<span class="hljs-keyword">else</span><br>			System.out.println(<span class="hljs-string">&quot;yes&quot;</span>);<br>		<br>	&#125;<br>	<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.SimpleFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pizza</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Pizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-built_in">this</span>.name = name;<br>	&#125;<br>	<br>	String name;<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />个人理解：</label>
<ul>
<li>简单工厂模式为对于种类较少的多个同种基类的创建，使用一个类进行菜单的作用，利用菜单进行分发，使用工厂类进行创建</li>
</ul></li>
</ul>
<h5 id="工厂方法模式">工厂方法模式</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Pizza&#123;<br>	<br>	&#125;<br>	<br>	class BJPepperPizza&#123;<br>	<br>	&#125;<br>	<br>	Pizza &lt;|-- BJPepperPizza<br>	BJPepperPizza &lt;|-- BJOrder<br>	<br>	class BJSourPizza&#123;<br>	<br>	&#125;<br>	<br>	Pizza &lt;|-- BJSourPizza<br>	BJSourPizza &lt;|--  BJOrder<br>	class TJPepperPizza&#123;<br>	<br>	&#125;<br>	<br>	Pizza &lt;|-- TJPepperPizza<br>	TJPepperPizza &lt;|-- TJOrder<br>	class TJSourPizza&#123;<br>	<br>	&#125;<br>	<br>	Pizza &lt;|-- TJSourPizza<br>	TJSourPizza &lt;|-- TJOrder<br>	<br>	class BJOrder&#123;<br>	<br>	&#125;<br>	BJOrder &lt;|-- Order<br>	class TJOrder&#123;<br>	<br>	&#125;<br>	TJOrder &lt;|-- Order<br>	class Order&#123;<br>	<br>	&#125;<br>	<br>	<br>	<br>	<br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Pizzas;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pizza</span> &#123;<br>	<br>	String name;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Pizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-built_in">this</span>.name = name;<br>	&#125;<br><br>&#125;<br><br><br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Pizzas;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Pizza</span>&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">BJPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">super</span>(name);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Orders;<br><br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.Pizza;<br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.TJPizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TJOrder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Order</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<br>		<span class="hljs-keyword">if</span>(name.equals(<span class="hljs-string">&quot;22&quot;</span>))<br>			pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TJPizza</span>(name);<br>		<br>			<br>		<span class="hljs-keyword">return</span> pizza;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Orders;<br><br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.Pizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Order</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">orderPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> getPizza(name);<br>		<br>		<br>	&#125;<br>	<br>	<span class="hljs-keyword">abstract</span> Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Orders;<br><br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.BJPizza;<br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.Pizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJorder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Order</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">if</span>(name.equals(<span class="hljs-string">&quot;ll&quot;</span>))<br>			pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPizza</span>(name);<br>		<br>		<span class="hljs-keyword">return</span> pizza;<br>			<br>		<br>		<br>	&#125;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.FactoryMethods.Orders;<br><br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.Pizza;<br><span class="hljs-keyword">import</span> Factory.FactoryMethods.Pizzas.TJPizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TJOrder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Order</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<br>		<span class="hljs-keyword">if</span>(name.equals(<span class="hljs-string">&quot;22&quot;</span>))<br>			pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TJPizza</span>(name);<br>		<br>			<br>		<span class="hljs-keyword">return</span> pizza;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />理解：大工厂与小工厂，大工厂负责一个菜单的作用，并实现基本方法，小工厂进行细化，执行各个部分，适用于类树较深的形式</label></li>
</ul>
<h5 id="抽象工厂模式">抽象工厂模式</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	Pizza &lt;|-- BJPepperPizza<br>	Pizza &lt;|-- TJPepperPizza<br>	<br>	Pizza &lt;|-- BJSourPizza<br>	Pizza &lt;|-- TJSourPizza<br>	<br>	BJPepperPizza &lt;|-- Order<br>	TJPepperPizza &lt;|-- Order<br>	BJSourPizza &lt;|-- Order<br>	TJSourPizza &lt;|-- Order<br>	<br>	Order &lt;|-- BJFactory<br>	Order &lt;|-- TJFactory<br>	BJFactory &lt;|-- AbsFactory<br>	TJFactory &lt;|-- AbsFactory<br>	<br>	<br>	<br>	<br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.Abstract;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br>	AbsFactory factory;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory</span><span class="hljs-params">(AbsFactory factory,String name)</span> &#123;<br>		<span class="hljs-built_in">this</span>.factory = factory;<br>		<br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> factory.getPizza(name);<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.Abstract;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AbsFactory</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.Abstract;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AbsFactory</span>&#123;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">getPizza</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<br>		<span class="hljs-keyword">if</span>(name.equals(<span class="hljs-string">&quot;6&quot;</span>))<br>			pizza =  <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPizza</span>(name);<br>		<br>		<span class="hljs-keyword">return</span> pizza;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Factory.Abstract;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TJPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Pizza</span>&#123;<br>	TJPizza(String name)&#123;<br>		<span class="hljs-built_in">super</span>(name);<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />理解：进一步分离了对象的创建与对象的种类之间的关系，设立了Order作为中间商，中间商负责获取条件，且向工厂传输，细节化后的工厂负责特殊的对象创建，都实现了最抽象的抽象共产的接口</label></li>
</ul>
<h4 id="原型模式">原型模式</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />利用clone进行对象的创建，快速的创建多个同种对象，简化对象的创建过程，提高创建效率</label></li>
<li><label><input
type="checkbox" />不用重新初始化对象，动态的获得运行的状态</label></li>
<li><label><input
type="checkbox" />如果原始对象的属性发生变化，其他对象无需进行更改（浅拷贝）</label></li>
<li><label><input
type="checkbox" />缺点：需要为每一个类配置拷贝方法，对已经存在的类来说违反了oop原则</label></li>
</ul>
<h4 id="建造者模式">建造者模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class HosueBuilder<br>	class CommonHouse<br>	class HighHouse<br>	<br>	HosueBuilder &lt;|-- CommonHouse<br>	HosueBuilder &lt;|-- HighHouse<br>	<br>	class House<br>	class Director<br>	Director : 【中间商】<br>	<br>	<br>	Director &lt;|-- HosueBuilder<br>	House &lt;|-- Director<br>	<br>	<br>	<br>	HosueBuilder : void buildBasic()<br>	HosueBuilder : void buildWalls()<br>	HosueBuilder : void roofed()<br>	<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />建造者模式的模式角色：</label>
<ul>
<li>Product：一个具体的产品对象</li>
<li>Builder：抽象的建造者（接口或者抽象类）</li>
<li>ConcreateBuilder：具体的建造者</li>
<li>Director：指挥者，构建一个使用Builder接口的对象。它主要是用于创建一个很复杂的对象，拥有两个作用：
<ol type="1">
<li>隔离客户和产品的生产过程</li>
<li>负责控制产品对象的生产过程</li>
</ol></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BuildeHouse</span> &#123;<br>	<br>	<span class="hljs-type">House</span> <span class="hljs-variable">house</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">House</span>();<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span>;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonHouse</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BuildeHouse</span>&#123;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;basic&quot;</span>);<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;walls&quot;</span>);<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;roof&quot;</span>);<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HighHouse</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BuildeHouse</span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;highB&quot;</span>);<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;highW&quot;</span>);<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;highR&quot;</span>);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">House</span> &#123;<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Director</span> &#123;<br>	<br>	BuildeHouse builder;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Director</span><span class="hljs-params">(BuildeHouse builder)</span> &#123;<br>		<span class="hljs-built_in">this</span>.builder = builder;<br>	&#125;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBuilder</span><span class="hljs-params">(BuildeHouse builder)</span> &#123;<br>		<span class="hljs-built_in">this</span>.builder = builder;<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildHouse</span><span class="hljs-params">()</span> &#123;<br>		builder.buildBasic();<br><span class="hljs-comment">//		builder.buildBasic();</span><br>		builder.buildWalls();<br>		builder.roofed();<br>	&#125;<br>	<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Builder;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">Director</span> <span class="hljs-variable">director</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Director</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CommonHouse</span>());<br>		director.setBuilder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HighHouse</span>());<br>		<br>		director.buildHouse();<br>		<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><p><label><input type="checkbox" />注意事项：</label></p>
<ul>
<li>客户端不需要知到内部组成的细节，将产品本身与产品的创建过程解耦，使得相同的创建过程可以创建不同的产品对象</li>
<li>每一个具体的建造者都相对独立，而与其他的具体建造者无关，因此可以很方便的替代具体建造者或增加新的具体建造者，用户使用不同的具体建造者得到不同的产品对象</li>
<li>可以更加精细的控制产品的创建过程。将复杂产品的创建步骤分解在不同的方法中，使得创建过程更加清晰，也更方便使用程序来控制创建过程</li>
<li>增加具体的建造者无需修改原有的代码，满足了OOP原则</li>
<li>建造者模式需要具体的实现类步骤相差不大，若步骤相差很大则不适合使用建造者模式</li>
<li>若产品内部变化复杂，则需要定义许多具体的建造者来适应这种变化，会使得系统变得庞大，需要考虑是否继续使用建造者模式</li>
</ul></li>
<li><p><label><input
type="checkbox" />抽象工厂模式和建造者模式的区别：</label></p>
<blockquote>
<p>抽象工厂模式实现对产品家族的创建，即不需要关系产品生产的步骤，只需要将生产的产品交给指定的工程工厂进行生产即可，至于生产步骤需要具体的工厂自己指定，而建造者模式对具体产品的生产步骤已经确定，而各个具体的建造者需要按照相同的模块，但至于模块的细节需要各个具体建造者自己实现</p>
</blockquote></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class MidFactory<br>	MidFactory : abstractBuild<br>	<br>	class MidBuilder<br>	MidBuilder : buildConcreate1<br>	MidBuilder : buildConcreate2<br>	MidBuilder : buildConcreate3<br></code></pre></td></tr></table></figure>
<h4 id="适配器模式">适配器模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Voltage220V<br>	class Voltage5V<br>	class AdapterVoltage<br>	class Phone<br>	<br>	<br>	AdapterVoltage &lt;|-- Voltage220V<br>	AdapterVoltage &lt;|-- Voltage5V<br>	Phone &lt;|-- 	AdapterVoltage <br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><p><label><input type="checkbox" />注意事项：</label></p>
<ol type="1">
<li>三种适配方式是以src如何给到adapter来命名的</li>
<li><ul>
<li>类适配器：以类给到，在Adapter里，就是将src当作类，继承（泛化）</li>
<li>对象适配器：以对象给到，在adapter里，将src作为一个对象属性，持有（聚合）</li>
<li>接口适配器：以实现接口的形式，使adapter实现src的方法（实现）</li>
</ul></li>
<li>Adapter模式最大的作用是将原本不兼容的接口融合在一起工作</li>
</ol></li>
<li><p><label><input
type="checkbox" />介绍：Adapter类，通过继承src完成dst的接口，实现src
-&gt; dst</label></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Adapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Voltage220V</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">outPut220V</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">220</span>;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Adapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Voltage5V</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">outPut5V</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Adapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoltageAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Voltage220V</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Voltage5V</span>&#123;<br><br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">outPut5V</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">int</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> outPut220V();<br>		<span class="hljs-keyword">return</span> (input / <span class="hljs-number">44</span>);<br>		<br>	&#125;<br>	<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure></li>
<li><p><label><input type="checkbox" />注意事项：</label></p>
<ul>
<li>由于java的单继承机制，所以要求dst只能为接口，有一定的局限性</li>
<li>由于继承了src，使得src的方法暴露出来，增加了adapter的成本</li>
<li>继承来src，便于更灵活的重写Src的方法</li>
</ul></li>
</ul>
<h5 id="对象适配器">对象适配器</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Voltage220V<br>	class Voltage5V<br>	class AdapterVoltage<br>	class Phone<br>	<br>	AdapterVoltage : Voltage220V voltage<br>	AdapterVoltage &lt;|-- Voltage220V<br>	AdapterVoltage &lt;|-- Voltage5V<br>	Phone &lt;|-- 	AdapterVoltage <br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />思路：</label>
<ul>
<li>基本思路与类适配器相同，但是<strong>不是继承</strong>Src，而是通过<strong>聚合</strong>的方式持有src类，进而实现dst接口，从而完成src
-&gt; dst的转变</li>
<li>符合合成复用原则，用关联的方式替代继承的方式</li>
</ul></li>
</ul>
<h5 id="接口适配器缺省适配器模式">接口适配器（缺省适配器模式）</h5>
<ul class="task-list">
<li><label><input type="checkbox" />介绍：</label>
<ul>
<li>只使用一个接口中的个别函数，可以通过构建一个抽象类空实现接口的函数，再构建该抽象函数的子类，重写指定的函数，完成接口的适配</li>
<li>适用于一个接口不想使用其全部方法的场景</li>
</ul></li>
</ul>
<h4 id="桥接模式">桥接模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Phone<br>	class VIVO<br>	class XiaoMi<br>	<br>	<br>	class Brand<br>	class FolderPhone<br>	<br>	Brand : void open()<br>	Brand : void close()<br>	<br>	VIVO &lt;|-- Brand<br>	XiaoMi &lt;|-- Brand<br>	Phone &lt;|-- VIVO<br>	Phone &lt;|-- XiaoMi<br>	FolderPhone &lt;|-- Phone<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li><p>将实现和抽象放在两个不同的层次，使两个层次可以独立的改变</p></li>
<li><p>是一种结构型设计模式</p></li>
<li><p>Bridge模式基于类的最小的设计原则</p></li>
<li><p>各成分：</p>
<ol type="1">
<li><p>Client:桥接模式的调用者</p></li>
<li><p>Abstraction:维护了实现层的接口，二者是聚合关系</p></li>
<li><p>RefinedAbstraction:接口的具体实现类</p></li>
</ol></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Brand</span> &#123;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FolderPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span>&#123;<br>	<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>	<br>	Brand brand;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vivo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XiaoMi</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>实现了抽象和实现部分的分离。从而提高了系统的灵活性，让抽象部分和实现部分分离开，有助于系统的分层设计，从而产生更好的系统结构</li>
<li>对于系统的高层部分，只需要知道系统的实现部分和抽象部分的接口就可以，其他部分由业务来实现</li>
<li>桥接模式代替多层继承方案，可以减少子类的个数，降低系统的管理和维护成本</li>
<li>桥接模式的引入增加了系统的理解和设计难度，桥接模式要求将抽象部分和实现部分分离出，有一定的局限性</li>
</ul></li>
</ul>
<h4 id="装饰者模式">装饰者模式</h4>
<p>以io模块为例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class InputStream<br>	<br>	class FileInputStream<br>	class StringBufferInputStream<br>	class ByteArrayInputStream<br>	class FilterInputStream<br>	<br>	InputStream &lt;|-- FileInputStream<br>	InputStream &lt;|-- StringBufferInputStream<br>	InputStream &lt;|-- ByteArrayInputStream<br>	InputStream &lt;|-- FilterInputStream<br>	<br>	class BufferInputStream<br>	class DataInputStream<br>	class LineNumberInputStream<br>	<br>	FilterInputStream : InputStream is<br>	FilterInputStream &lt;|-- BufferInputStream<br>	FilterInputStream &lt;|-- DataInputStream<br>	FilterInputStream &lt;|-- LineNumberInputStream<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />IO模块：</label>
<ul>
<li>FilterInputStream：装饰器</li>
<li>InputStream：抽象类</li>
<li>FileInputStream，StringBufferStrean，ByteArratInputStream：具体被修饰类</li>
<li>BufferInputStream,DataInputStream..：具体修饰类</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Decorate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlackCoffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Coffee</span>&#123;<br><br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-type">int</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.cost() + <span class="hljs-number">10</span>;<br>	&#125;<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Decorate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span>&#123;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-type">int</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">5</span>;<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setCost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Decorate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorater</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span>&#123;<br>	<br>	Drink drink;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-type">int</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">int</span> <span class="hljs-variable">cost_temp</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>		<span class="hljs-keyword">if</span>(drink != <span class="hljs-literal">null</span>)<br>			cost_temp = drink.cost();<br>		<span class="hljs-keyword">return</span> cost_temp + cost;<br>	&#125;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setDrink</span><span class="hljs-params">(Drink drink)</span> &#123;<br>		<span class="hljs-built_in">this</span>.drink = drink;<br>	&#125;<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setCost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Decorate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Drink</span> &#123;<br>	<br>	<span class="hljs-type">int</span> cost;<br>	<span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCost</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Decorate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sugar</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Decorater</span>&#123;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">getCost</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">int</span> <span class="hljs-variable">temp_cost</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>		<span class="hljs-keyword">if</span>(drink != <span class="hljs-literal">null</span>)<br>			temp_cost = drink.cost();<br>		<br>		cost = temp_cost + <span class="hljs-number">5</span>;<br>			<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><p><label><input type="checkbox" />个人理解：</label></p>
<p>在装饰者模式中，对于某类的修饰，将被修饰的部分和修饰部分进行抽象和分离，使修饰和被修饰的部分都继承一个公共的抽象类，从而便于在修饰类中添加被修饰的对象，使得可以多层嵌套进行修饰</p></li>
</ul>
<h4 id="外观模式过程模式">外观模式（过程模式）</h4>
<ul class="task-list">
<li><label><input type="checkbox" />介绍：</label>
<ol type="1">
<li>外观模式可以理解为转换一群接口，客户只要调用一个接口，而不调用多个接口才能达到目的</li>
<li>外观模式就是解决多个复杂接口带来的使用困难，起到简化用户操作的作用</li>
</ol></li>
<li><label><input
type="checkbox" />个人理解：就是封装！！！即将子系统进行封装，提供一个总的接口进行调用</label></li>
</ul>
<h4 id="享元模式">享元模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>享元模式也叫蝇量模式，运用共享技术有效的支持大量细粒度的对象</li>
<li>常用于
系统底层的开发，解决系统性能问题。像数据库连接池，里面都是创建好的连接对象，在这些连接对象中有我们需要的则直接拿来使用，避免重复创建，如果没有需要的则创建一个</li>
<li>享元模式能够解决重复对象的内存浪费问题，当系统中由大量的相似对象，需要缓冲池时不需要重复创建对象，可以从缓冲池中获得，这样可以降低系统内存，同时提高效率</li>
<li>享元模式的经典应用即池技术</li>
</ul></li>
<li><label><input type="checkbox" />模式的角色：</label>
<ul>
<li>FlyWeight：抽象的享元角色，产品的抽象类，定义出对象的<strong>外部状态</strong>和<strong>内部状态</strong>的接口或实现</li>
<li>ConcreteFlyWeigft：具体的享元角色，具体的产品类，实现角色定义的相关业务</li>
<li>UnsharedConcreteFlyWeight：不可共享的角色，不会出现在享元工厂中</li>
<li>FlyWeightFactory：享元工厂，用于构建一个容器池（set），同时构建从容器中获取对象的方法</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class FlyWeight<br>	class FlyWeightFactory<br>	class ConcreteFlyWeight<br>	class UnsharedConcreteFlyWeight<br>	class Client<br>	<br>		<br>	 FlyWeight &lt;|--  ConcreteFlyWeight<br>	 FlyWeight &lt;|--  UnsharedConcreteFlyWeight<br>	 FlyWeight : void operate<br>	 FlyWeightFactory : void getFlyWeight<br>	 <br>	 FlyWeightFactory &lt;|-- FlyWeight<br>	 FlyWeightFactory &lt;|-- Client<br>	 ConcreteFlyWeight &lt;|-- Client<br>	 UnsharedConcreteFlyWeight &lt;|-- Client<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />内部状态和外部状态：</label>
<ul>
<li>内部状态：内部状态是对象共享出来的属性，不会随着环境的变化而变化</li>
<li>外部状态：外部状态随着环境的改变而改变，是不可以共享的状态</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> FlyWeight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span>  <span class="hljs-title class_">WebSite</span> &#123;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> FlyWeight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteWebSite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebSite</span>&#123;<br>	String type;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteWebSite</span><span class="hljs-params">(String type)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.type = type;<br>	&#125;<br>	<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> FlyWeight;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSiteFactory</span> &#123;<br>	<br>	<span class="hljs-keyword">private</span> HashMap&lt;String,ConcreteWebSite&gt; pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, ConcreteWebSite&gt;();<br>	<br>	<span class="hljs-keyword">public</span> WebSite <span class="hljs-title function_">getWebSite</span><span class="hljs-params">(String type)</span> &#123;<br>		<span class="hljs-keyword">if</span>(!pool.containsKey(type))<br>			pool.put(type, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteWebSite</span>(type));<br>		<br>		<span class="hljs-keyword">return</span> (WebSite)pool.get(type);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>享元模式，享即共享，元即对象</li>
<li>享元模式注意内部和外部的划分，共享内部，细化外部</li>
<li>使用享元模式需要一个工厂类进行控制</li>
</ul></li>
</ul>
<h4 id="代理模式">代理模式</h4>
<h5 id="静态代理">静态代理</h5>
<ul class="task-list">
<li><label><input
type="checkbox" />代理类和被代理类通过继承相同的父类或实现相同的接口来完成代理关系，并使代理类完成和被代理类的聚合关系，从而使得被代理类通过代理类完成相应的功能</label></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">TeacherDao</span> &#123;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TeacherDao</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;this is teacher&quot;</span>);<br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TeacherDao</span>&#123;<br>	<br>	TeacherDao teacher;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">TeacherProxy</span><span class="hljs-params">(TeacherDao teacher)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.teacher = teacher;<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;this proxy saying&quot;</span>);<br>		teacher.teach();<br>		<br>	&#125;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> &#123;<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">TeacherDao</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherProxy</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDaoImpl</span>());<br>		teacher.teach();<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<h5 id="动态代理jdk代理">动态代理（JDK代理）</h5>
<ul class="task-list">
<li><label><input
type="checkbox" />利用JDK提供的接口方法创建代理对象，使得代理对象不需要手动实现接口，但是被代理对象依然需要实现接口</label></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> &#123;<br>	<br>	Object target;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTarget</span><span class="hljs-params">(Object obj)</span> &#123;<br>		<span class="hljs-built_in">this</span>.target = obj;<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object obj)</span> &#123;<br>		target = obj;<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces(),<span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>(<br>				) &#123;<br>			<br>			<span class="hljs-meta">@Override</span><br>			<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>				System.out.println(<span class="hljs-string">&quot;proxy&quot;</span>);<br>				<span class="hljs-comment">// TODO Auto-generated method stub</span><br>				method.invoke(target, args);<br>				<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>			&#125;<br>		&#125;);<br>	&#125;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<p>参数说明：</p>
<blockquote>
<p>newProxyInstance(target.getClass().getClassLoader(),
target.getClass().getInterfaces(),new InvocationHandler）：</p>
<ul>
<li>参数一：被代理对象的类的加载器</li>
<li>参数二：被代理对象类的接口集合</li>
<li>参数三：事件处理，执行目标对象的方法时，会触发事件处理器的方法，进而完成代理方法的加强</li>
</ul>
</blockquote>
<h5 id="动态代理cglib代理">动态代理（CGLIB代理）</h5>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li>无论是静态代理，或是动态的JDK代理，都需要类实现一个或多个接口，当被代理对象未实现接口时，则不可以使用以上的两种代理方式</li>
<li>CGLIB代理也叫做子类代理，他是在内存中构建一个子类对象而实现对目标功能的拓展</li>
<li>CGLIB底层通过ASM字节码处理框架来转化成字节码文件</li>
</ul></li>
<li><p><label><input
type="checkbox" />CGLIB代理是实现的步骤：</label></p>
<ul>
<li>引入相应的jar包</li>
<li>在内存中动态的构建子类，注意代理类不能未final类</li>
<li>，目标对象的方法若为 final /
static则目标方法不会被拦截，即目标方法不会被增强</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy.CGLIB;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.Enhancer;<br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.MethodInterceptor;<br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.MethodProxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MethodInterceptor</span>&#123;<br>	<br>	Object target;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object obj)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.target = obj;<br>	&#125;<br>	<br>	<br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span> &#123;<br>		<br>		<span class="hljs-comment">// 创建工具类</span><br>		<span class="hljs-type">Enhancer</span> <span class="hljs-variable">enhancer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Enhancer</span>(); <br>		<br>		<span class="hljs-comment">//设置父类</span><br>		enhancer.setSuperclass(target.getClass());<br>		<br>		<span class="hljs-comment">//设置回调函数</span><br>		enhancer.setCallback(<span class="hljs-built_in">this</span>);<br>		<br>		<span class="hljs-comment">//创建子类对象，即代理对象</span><br>		<span class="hljs-keyword">return</span> enhancer.create();<br>		<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Object arg0, Method method, Object[] arg2, MethodProxy arg3)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;cglib代理方法&quot;</span>);<br>		method.invoke(target, arg2);<br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy.CGLIB;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> &#123;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>		System.out.println(<span class="hljs-string">&quot;被代理对象&quot;</span>);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Proxy.CGLIB;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">TeacherDao</span> <span class="hljs-variable">teacher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>		<span class="hljs-type">TeacherDao</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (TeacherDao)<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(teacher).getProxyInstance();<br>		System.out.println(proxy.getClass());<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<h5 id="代理模式的变种">代理模式的变种</h5>
<ul class="task-list">
<li><label><input
type="checkbox" />防火墙代理：内网通过代理穿过防火墙实现对公网的访问</label></li>
<li><label><input
type="checkbox" />缓存代理：请求图片等资源时先到缓存代理中去取，若缓存代理中无数据，再到数据库中去取</label></li>
<li><label><input
type="checkbox" />远程代理：<strong>远程对象的本地代表</strong>，通过它可以将远程对象当作本地对象来调用，远程代理通过网络和真正的远程对象沟通</label></li>
<li><label><input
type="checkbox" />同步代理：主要使用在多线程编程中，完成多线程的同步工作</label></li>
</ul>
<h4 id="模板方法模式">模板方法模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>在一个抽象类中公开定义了执行它的方法的模板，它的子类可以按需要重写方法的实现，但调用将以抽象类中定义的方式执行</li>
<li>模板方法模式是一个操作中算法的骨架，将一些步骤延迟到子类中实现，使得子类可以不改变一个算法的结构，就可以重写定义算法的某些特征</li>
<li>模板方法模式属于行为型模式</li>
</ul></li>
<li><label><input type="checkbox" />模式角色：</label>
<ul>
<li>AbstractClass：定义了抽象方法，和抽象方法的执行骨架</li>
<li>ConcreteClass：具体实现抽象的方法但是需要按照骨架进行顺序执行</li>
</ul></li>
</ul>
<h5 id="基本模板方法模式">基本模板方法模式</h5>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> TemplateMethods;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MakeDrink</span> &#123;<br>	<br>    <br>    <span class="hljs-comment">// 注意添加final关键词，防止子类重写该方法</span><br>	<span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operate</span><span class="hljs-params">()</span> &#123;<br>		System.out.println(<span class="hljs-string">&quot;select:&quot;</span> + select() + <span class="hljs-string">&quot; add: &quot;</span> + add());<br>	&#125;<br>	<br>	<span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">select</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">add</span><span class="hljs-params">()</span>;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> TemplateMethods;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedDrink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MakeDrink</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	String <span class="hljs-title function_">add</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;red!!&quot;</span>;<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	String <span class="hljs-title function_">select</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;select red!&quot;</span>;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> TemplateMethods;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<br>		<span class="hljs-type">MakeDrink</span> <span class="hljs-variable">drink</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedDrink</span>();<br>		drink.operate();<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />个人理解：将抽象的逻辑顺序抽离出，定义逻辑，具体实现交由子类完成</label></li>
</ul>
<h5 id="钩子方法">钩子方法</h5>
<ul class="task-list">
<li><label><input
type="checkbox" />在模板方法中，定义一个方法，默认不做任何事情，可以在子类中视情况选择实现，该方法称为<strong>钩子方法</strong></label></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> TemplateMethods;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MakeDrink</span> &#123;<br>	<br>	<span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operate</span><span class="hljs-params">()</span> &#123;<br>		<br>		<span class="hljs-keyword">if</span>(isPure()) &#123;<br>			addEquip();<br>		&#125;<br>	&#125;<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">addEquip</span><span class="hljs-params">()</span> &#123;<br>		System.out.println(<span class="hljs-string">&quot;select:&quot;</span> + select() + <span class="hljs-string">&quot; add: &quot;</span> + add());<br>	&#125;<br>	<span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPure</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">select</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">add</span><span class="hljs-params">()</span>;<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> TemplateMethods;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PureDrink</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MakeDrink</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	String <span class="hljs-title function_">add</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-type">boolean</span> <span class="hljs-title function_">isPure</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>	&#125;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	String <span class="hljs-title function_">select</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="命令模式">命令模式</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />使得发起请求的对象和执行请求的对象进行解耦，发器请求的对象是调用者，调用者只需要调用命令对象的execute方法就可以让接收者进行工作，而不必知到接收者是谁，命令对象会负责让接受者执行请求的动作，请求发起者和请求执行者的解耦是通过命令对象实现的</label></li>
<li><label><input
type="checkbox" />设计一个命令队列。把命令放进队列可以多线程的执行命令</label></li>
<li><label><input
type="checkbox" />可以设计空命令对象，方便null值的判定</label></li>
<li><label><input
type="checkbox" />设置undo方法进行命令的撤销</label></li>
</ul>
<h4 id="访问者模式">访问者模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label></li>
<li><label><input type="checkbox" />模式角色：</label>
<ul>
<li>Visitor：抽象的visitor类，为子类提供visit方法</li>
<li>ConcreteVistior：visitor的具体实现类</li>
<li>Visited：被访问者的抽象类，为子类提供访问者的accpet接口</li>
<li>ConcreteVisited：被访问者的具体实现类，调用accept方法</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStructure</span> &#123;<br>	<br>	Person persons[];<br>	<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setPerson</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Action</span> &#123;<br>	<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAction</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Failed</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setAction</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sucessfully</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setAction</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>	Action action;<br>	<br>	<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accpet</span><span class="hljs-params">(Action action)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Man</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">accpet</span><span class="hljs-params">(Action action)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-built_in">this</span>.action = action;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Woman</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">accpet</span><span class="hljs-params">(Action action)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-built_in">this</span>.action = action;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStructure</span> &#123;<br>	<br>	Person persons[];<br>	<br>	<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">setPerson</span><span class="hljs-params">()</span> &#123;<br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />个人理解：将有交互的两个类抽象出来，在抽象的类中就实现交互和聚合，为子类的交互提供接口</label></li>
</ul>
<h5 id="双分派">双分派</h5>
<ul>
<li>首先将一个对象作为参数传入（第一次分派）</li>
<li>在被传入的方法中将this作为参数传入第一个对象的某个方法内</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors.Doule;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>	<span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;A&quot;</span>;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getBMethods</span><span class="hljs-params">(B b)</span> &#123;<br>		b.method(<span class="hljs-built_in">this</span>);<br>	&#125;<br>	<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors.Doule;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">(A a)</span> &#123;<br>		System.out.println(a.name);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Visitors.Doule;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> &#123;<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>		a.getBMethods(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>优点：
<ol type="1">
<li>访问者模式具有单一性职责原则，具有更好的可扩展性，灵活性高</li>
<li>访问者模式可以对功能进行统一，可以做报表，UI，拦截器和过滤器，使用与结构稳定的系统</li>
</ol></li>
<li>缺点：
<ol type="1">
<li>具体元素需要对访问者公布细节，也就是访问者关注了类的其他细节</li>
<li>违反了依赖倒转原则，访问者依赖的是具体的元素而不是抽象的元素</li>
</ol></li>
</ul></li>
</ul>
<h4 id="迭代器模式"><strong>迭代器模式</strong></h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>迭代器模式常用的设计模式，属于行为模式</li>
<li>如果集合元素是用不同方式实现的，，则客户端遍历这些元素时就需要使用不同的方式，可能还会暴露元素内部属性</li>
<li>迭代器模式提供遍历元素的统一接口用一致的方法遍历元素，不需要知到集合元素的底层表示，即不爆露内部结构</li>
</ul></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Iterator<br>	Iterator : boolean hasNext<br>	Iterator : E next<br>	Iterator : void remove<br>	<br>	<br>	<br>	class ConcreteIterator<br>	ConcreteIterator &lt;|-- Iterator<br>	<br>	<br>	class Aggregate<br>	Aggregate : void createIterator<br>	class ConcreteAggregate<br>	ConcreteAggregate &lt;|-- Aggregate<br>	ConcreteAggregate &lt;|-- ConcreteIterator<br>	<br>	ConcreteAggregate : ArrayList elements<br>	<br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />迭代器职责介绍：</label>
<ul>
<li>Iterator：迭代器接口，系统提供，含有hasNext,next,remove</li>
<li>ConcreteIterator：具体的迭代类，管理迭代</li>
<li>Aggregate：一个统一的聚合接口，将客户端与聚合解耦</li>
<li>ConcreteAggregate：具体的聚合持有对象，并返回迭代器对象，遍历元素</li>
<li>Client：客户端，通过Iterator和Aggregate依赖子类</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">College</span> &#123;<br>	<br>	<br>	<span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">getIterator</span><span class="hljs-params">()</span>;<br>	<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerCollege</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">College</span>&#123;<br>	<br>	List&lt;Department&gt; list;<br>	<br>	<span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;computer&quot;</span>;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ComputerCollege</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>		list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;66&quot;</span>));<br>		list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;77&quot;</span>));<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">getIterator</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerIterator</span>(list);<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> name;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&#123;<br>	<br>	List&lt;Department&gt; list;<br>	<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>		<span class="hljs-keyword">if</span>(index &lt; list.size())<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>		<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">return</span> list.get(index++);<br><span class="hljs-comment">//		return null;</span><br>	&#125;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ComputerIterator</span><span class="hljs-params">(List&lt;Department&gt; list)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.list = list;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Department</span> &#123;<br>	String name;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Department</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.name = name;<br>		<br>	&#125;<br>	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">return</span> name;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutPutImpl</span> &#123;<br>	List&lt;College&gt; list;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">OutPutImpl</span><span class="hljs-params">(List&lt;College&gt; list)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.list = list;<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollege</span><span class="hljs-params">()</span> &#123;<br>		Iterator&lt;College&gt; iterator = list.iterator();<br>		<span class="hljs-keyword">while</span>(iterator.hasNext()) &#123;<br>			<span class="hljs-type">College</span> <span class="hljs-variable">college</span> <span class="hljs-operator">=</span> iterator.next();<br>			System.out.println(college);<br>			printDepartment(college.getIterator());<br>			<br>		&#125;<br>	&#125;<br>	<br>	<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDepartment</span><span class="hljs-params">(Iterator iterator)</span> &#123;<br>		<span class="hljs-keyword">while</span>(iterator.hasNext()) &#123;<br>			System.out.println(iterator.next());<br>		&#125;<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> &#123;<br>	<br><span class="hljs-comment">//	@Test</span><br><span class="hljs-comment">//	public void test() &#123;</span><br><span class="hljs-comment">//		Iterator&lt;E&gt;</span><br><span class="hljs-comment">//		</span><br><span class="hljs-comment">//	&#125;</span><br><span class="hljs-comment">//	7</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">client</span><span class="hljs-params">()</span> &#123;<br>		ArrayList&lt;College&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>		list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerCollege</span>());<br>		<br>		<span class="hljs-type">OutPutImpl</span> <span class="hljs-variable">impl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutPutImpl</span>(list);<br>		impl.printCollege();<br>		<br>		<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input type="checkbox" />注意事项：</label>
<ul>
<li>优点：
<ol type="1">
<li>提供了一个统一遍历容器的方法，不需要考虑聚合的类型，使用一种方法就可以遍历对象</li>
<li>隐藏了聚合的内部的细节，客户端遍历时只能取到迭代器，而不知道迭代的具体组成</li>
<li>遵循了单一职责原则，将对象的管理和对象的遍历进行分开，使用内部类的迭代进行对象的迭代使用外部类的方法进行对象的管理</li>
</ol></li>
<li>缺点：每个聚合的对象都需要一组迭代器，多个类会有多个迭代器</li>
</ul></li>
</ul>
<h4 id="观察者模式">观察者模式</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br> class Subject<br> Subject : registeObeserver<br> Subject : removeObserver<br> Subject : notifyObserver<br> <br> class Data<br> Data : List&lt;Observer&gt; list<br> Data &lt;|-- Subject<br> Data : setNewValue<br> <br> class Observer<br> Observer : update<br> Observer : show<br> <br> class CurrentCondition<br> CurrentCondition &lt;|-- Observer<br> Data &lt;|--  CurrentCondition <br> <br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Subject</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registObserver</span><span class="hljs-params">(Observer o)</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removerObserver</span><span class="hljs-params">(Observer o)</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObserver</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Subject</span>&#123;<br>	<br>	List&lt;Observer&gt; list;<br>	<span class="hljs-type">double</span> value;<br>	<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">WeatherData</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObserver</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">for</span>(Observer o : list)<br>			o.update(value);<br>		<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registObserver</span><span class="hljs-params">(Observer o)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">if</span>(!list.contains(o))<br>			list.add(o);<br>		<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removerObserver</span><span class="hljs-params">(Observer o)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-keyword">if</span>(list.contains(o))<br>			list.remove(o);<br>		<br>	&#125;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">valueReset</span><span class="hljs-params">(<span class="hljs-type">double</span> v)</span> &#123;<br>		value = v;<br>		notifyObserver();<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Observer</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurrentCondition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span>&#123;<br>	<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		show(value);<br>		<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;new value: &quot;</span> + value);<br>		<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaiduObserver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span>&#123;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;baidu: &quot;</span> + value);<br>		<br>	&#125;<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">double</span> value)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		show(value);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Observer;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">WeatherData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherData</span>();<br>		<br>		<span class="hljs-type">CurrentCondition</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CurrentCondition</span>();<br>		data.registObserver(condition);<br>		data.registObserver(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BaiduObserver</span>());<br>		<br>		data.valueReset(<span class="hljs-number">2</span>);<br>		<br>		<span class="hljs-comment">//data.removerObserver();</span><br>	&#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure>
<h4 id="中介者模式">中介者模式</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li>用一个中介对象来封装一系列的对象交互。中介者使其对象不需要显示的互相引用，从而使其耦合松散，而且可以独立的改变他们之间的交互</li>
<li>中介者者模式属于行为型模式，使代码易于维护</li>
</ul></li>
<li><p><label><input type="checkbox" />模式角色：</label></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Mediator<br>	class ConcreteMediator<br>	ConcreteMediator &lt;|-- Mediator<br>	<br>	class Colleague<br>	class ConcreteColleague<br>	ConcreteColleague &lt;|-- Colleague<br>	Mediator &lt;|-- Colleague<br>	Mediator &lt;|-- ConcreteColleague<br>	ConcreteMediator &lt;|-- ConcreteColleague<br>	<br>	ConcreteMediator : HashMap Colleagues<br></code></pre></td></tr></table></figure></li>
<li><p><label><input type="checkbox" />角色说明：</label></p>
<ul>
<li>Mediator：中介者的抽象对象，定义了同事对象到中介者对象的接口</li>
<li>Colleague：抽象同事类，抽象子系统的父类</li>
<li>ConcreteMediator：具体的中介者，实现抽象方法，他需要知到所有的具体的同事类，以集合形式管理并接受同事对象的消息完成抽象任务</li>
<li>ConcreteColleague：具体的同事类，每个同事只知道自己的行为，不了解其他同事类的行为，但他们都依赖中介者对象</li>
</ul></li>
<li><p><label><input type="checkbox" />注意事项：</label></p>
<ul>
<li>多个类相互耦合，会形成网状结构，使用中介者模式会使网状结构变为星型结构</li>
<li>减少类间依赖，降低了耦合，符合迪米特法则</li>
<li>中介者承担了较多的责任</li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Mediator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerColleague</span><span class="hljs-params">(Colleague colleague)</span>;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeColleague</span><span class="hljs-params">(Colleague colleague)</span>;<br><span class="hljs-comment">//	public abstract void adjust();</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getMessage</span><span class="hljs-params">(Colleague colleague,<span class="hljs-type">int</span> index)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Mediator;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Mediator</span>&#123;<br>	<br>	List&lt;Colleague&gt; list;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteMediator</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerColleague</span><span class="hljs-params">(Colleague colleague)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		list.add(colleague);		<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeColleague</span><span class="hljs-params">(Colleague colleague)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		list.remove(colleague);<br>		<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getMessage</span><span class="hljs-params">(Colleague colleague,<span class="hljs-type">int</span> index)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<br>		<br>		<span class="hljs-comment">// getMessage from colleague and do property action</span><br>		<br>	&#125;<br>&#125;<br><br><br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Mediator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span> &#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Colleague</span><span class="hljs-params">(String name,Mediator mediator)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.name = name;<br>		<span class="hljs-built_in">this</span>.mediator = mediator;<br>	&#125;<br>	String name;<br>	Mediator mediator;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Mediator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleague</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span>&#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteColleague</span><span class="hljs-params">(String name,Mediator mediator)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">super</span>(name,mediator);<br>	&#125;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-built_in">this</span>.mediator.getMessage(<span class="hljs-built_in">this</span>,<span class="hljs-number">1</span>);<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<h4 id="备忘录模式">备忘录模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>在不破坏封装性的前提下捕获对象的状态，并在对象之外保存该状态，这样以后就可以将该对象回复到原先保存的状态</li>
<li>备忘录模式属于行为模式</li>
</ul></li>
<li><label><input type="checkbox" />个人理解：</label>
<ul>
<li>即对对象的信心进行保存</li>
<li>可以联合原型模式一起使用通过clone</li>
<li>也可以通过序列化和反序列化实现</li>
</ul></li>
</ul>
<h4 id="解释器模式">解释器模式</h4>
<ul>
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li>在编译原理中，一个算术表达式通过词法分析器形成词法单元，而后这些词法单元通过语法分析器形成语法分析树，最后形成一棵抽象的语法分析树，这里的词法分析器和语法分析器都可以看作为解释器</li>
<li>解释器模式：指定一个表达式，定义它的文法的一种表示，并定义一个解释器，使用该解释器来解析语言中的句子</li>
</ul></li>
<li><p><label><input type="checkbox" />模式角色：</label></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Context<br>	class Client<br>	class AbstratctExpression<br>	class TerminalExpression<br>	class NonTerminalExpression<br>	<br>	<br>	Context &lt;|-- Client<br>	AbstratctExpression &lt;|-- Client<br>	TerminalExpression &lt;|--  AbstratctExpression<br>	NonTerminalExpression &lt;|-- AbstratctExpression<br>	AbstratctExpression : Expression interpreter<br>	<br></code></pre></td></tr></table></figure></li>
<li><p>Context：环境角色，含有解释器之外的全局信息</p></li>
<li><p>AbstractExpression：抽象表达式，声明一个抽象的解释操作，这个为抽象语法树中的所有结点共享</p></li>
<li><p>TerminalExpression：为终结符表达式，实现与文法中的终结相关的解释操作</p></li>
<li><p>NoneTerminalExpression：为非终结符表达式</p></li>
<li><p><label><input
type="checkbox" />解释器模式使得程序变得更为复杂，需要谨慎使用</label></p></li>
</ul>
<h4 id="状态模式">状态模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>主要用来解决对象在多种状态转换时，需要对外输出不同行为的问题。状态和行为是一一对应的,状态之间可以相互转化</li>
<li>当一个对象内在状态改变时，允许改变其行为，这个对象看起来像是改变了其类</li>
</ul></li>
</ul>
<h4 id="策略模式">策略模式</h4>
<ul class="task-list">
<li><label><input type="checkbox" />基本介绍：</label>
<ul>
<li>策略模式定义算法族，分别封装起来，让他们相互替换，此模式让算法的变化独立于使用算法的用户</li>
<li>算法体现了几个设计原则：
<ol type="1">
<li>把变化的代码从不变的代码中分离出来</li>
<li>针对接口编程而不是具体的类（定义了策略接口）</li>
<li>更多的使用了组合和聚合而不是继承（里氏替换原则）</li>
</ol></li>
</ul></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> &#123;<br>	Fly fly;<br>	Quack quack;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">duckFly</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-built_in">this</span>.fly.fly();<br>	&#125;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">duckQuack</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-built_in">this</span>.quack.quack();<br>	&#125;<br>	<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToyDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span>&#123;<br>	<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">ToyDuck</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.fly = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadFly</span>();<br>		<span class="hljs-built_in">this</span>.quack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadQuack</span>();<br>		<br>	&#125;<br>	<br>	<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Fly</span> &#123;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadFly</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Fly</span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;bad fly&quot;</span>);<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Quack</span> &#123;<br>	<span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadQuack</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Quack</span>&#123;<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;bad quack&quot;</span>);<br>		<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul class="task-list">
<li><label><input
type="checkbox" />个人理解：策略模式即将提供一个可以聚合的抽象类作为接口，使得子类各种子类拥有更低的耦合性，使得方法将进行分离，做到物尽其用，但是会造成类的冗余</label></li>
</ul>
<h4 id="职责链模式">职责链模式</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />基本介绍：</label></p>
<ul>
<li>职责链模式，为请求创建一个接收者对象的链，这种模式对请求的发送者和接收者进行解耦</li>
<li>职责链模式通常每个接收者都包含对另一个接收者的引用，若该接收者无法处理，则转交给引用的接收者</li>
<li><strong>避免了if...else...的使用</strong>，降低了程序的耦合度，体现了面向对象的思想</li>
<li>使多个对象都有机会处理请求，从而避免了请求的发送者和接收者的紧密的耦合</li>
</ul></li>
<li><p><label><input type="checkbox" />模式角色:</label></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs mermaid">classDiagram<br>	class Handler<br>	class ConcreteHandlerA<br>	class ConcreteHandlerAA<br>	<br>	class Request<br>	<br>	Handler : void getRequest<br>	Handler : Handler handler<br>	Handler &lt;|-- Request<br>	<br>	Handler &lt;|-- ConcreteHandlerA<br>	ConcreteHandlerA &lt;|-- ConcreteHandlerAA<br>	ConcreteHandlerA : ConcreteHandlerAA aa<br></code></pre></td></tr></table></figure>
<ul>
<li>Handler：抽象的处理者，进行请求的接收，同时含有handler的聚合</li>
<li>ConcreteHandler：具体的处理者，进行具体请求的处理，可以访问他的后继处理者，若可以处理则处理后返回否则交由后继进行处理，形成职责链</li>
<li>Request：含有多个属性表示一个请求</li>
</ul></li>
</ul>
<hr />
<h2 id="补充">补充</h2>
<h4 id="增强耦合的方法">增强耦合的方法</h4>
<ul>
<li>继承</li>
<li>if...else...（当出现多个if...else...时）</li>
</ul>
<h4 id="volatile关键词">volatile关键词</h4>
<p>摘自：https://www.cnblogs.com/zhengbin/p/5654805.html</p>
<blockquote>
<h3
id="先补充一下概念java-内存模型中的可见性原子性和有序性"><strong>先补充一下概念：Java
内存模型中的可见性、原子性和有序性。</strong></h3>
<p><strong>可见性：</strong></p>
<p>　　可见性是一种复杂的属性，因为可见性中的错误总是会违背我们的直觉。通常，我们无法确保执行读操作的线程能适时地看到其他线程写入的值，有时甚至是根本不可能的事情。为了确保多个线程之间对内存写入操作的可见性，必须使用同步机制。</p>
<p>　　<strong>可见性，是指线程之间的可见性，一个线程修改的状态对另一个线程是可见的。</strong>也就是一个线程修改的结果。另一个线程马上就能看到。比如：用volatile修饰的变量，就会具有可见性。volatile修饰的变量不允许线程内部缓存和重排序，即直接修改内存。所以对其他线程是可见的。但是这里需要注意一个问题，volatile只能让被他修饰内容具有可见性，但不能保证它具有原子性。比如
volatile int a = 0；之后有一个操作 a++；这个变量a具有可见性，但是a++
依然是一个非原子操作，也就是这个操作同样存在线程安全问题。</p>
<p>　　在 Java 中 volatile、synchronized 和 final 实现可见性。</p>
<p><strong>原子性：</strong></p>
<p>　　<strong>原子是世界上的最小单位，具有不可分割性。</strong>比如
a=0；（a非long和double类型）
这个操作是不可分割的，那么我们说这个操作时原子操作。再比如：a++；
这个操作实际是a = a +
1；是可分割的，所以他不是一个原子操作。非原子操作都会存在线程安全问题，需要我们使用同步技术（sychronized）来让它变成一个原子操作。一个操作是原子操作，那么我们称它具有原子性。java的concurrent包下提供了一些原子类，我们可以通过阅读API来了解这些原子类的用法。比如：AtomicInteger、AtomicLong、AtomicReference等。</p>
<p>　　在 Java 中 synchronized 和在 lock、unlock 中操作保证原子性。</p>
<p><strong>有序性：</strong></p>
<p>　　Java 语言提供了 volatile 和 synchronized
两个关键字来保证线程之间操作的有序性，volatile
是因为其本身包含“禁止指令重排序”的语义，synchronized
是由“一个变量在同一个时刻只允许一条线程对其进行 lock
操作”这条规则获得的，此规则决定了持有同一个对象锁的两个同步块只能串行执行。</p>
</blockquote>
<blockquote>
<p>　Java语言提供了一种稍弱的同步机制，即volatile变量，用来确保将变量的更新操作通知到其他线程。当把变量声明为volatile类型后，编译器与运行时都会注意到这个变量是共享的，因此不会将该变量上的操作与其他内存操作一起重排序。volatile变量不会被缓存在寄存器或者对其他处理器不可见的地方，因此在读取volatile类型的变量时总会返回最新写入的值。</p>
<p>　　在访问volatile变量时不会执行加锁操作，因此也就不会使执行线程阻塞，因此volatile变量是一种比sychronized关键字更轻量级的同步机制。</p>
</blockquote>
<blockquote>
<p>当对非 volatile
变量进行读写的时候，每个线程先从内存拷贝变量到CPU缓存中。如果计算机有多个CPU，每个线程可能在不同的CPU上被处理，这意味着每个线程可以拷贝到不同的
CPU cache 中。</p>
<p>　　而声明变量是 volatile 的，JVM 保证了每次读变量都从内存中读，跳过
CPU cache 这一步。</p>
<h3 id="当一个变量定义为-volatile-之后将具备两种特性">当一个变量定义为
volatile 之后，将具备两种特性：</h3>
<p>　　1.保证此变量对所有的线程的可见性，这里的“可见性”，如本文开头所述，当一个线程修改了这个变量的值，volatile
保证了新值能立即同步到主内存，以及每次使用前立即从主内存刷新。但普通变量做不到这点，普通变量的值在线程间传递均需要通过主内存（详见：<a
target="_blank" rel="noopener" href="http://www.cnblogs.com/zhengbin/p/6407137.html">Java内存模型</a>）来完成。</p>
<p>　　2.禁止指令重排序优化。有volatile修饰的变量，赋值后多执行了一个“load
addl $0x0,
(%esp)”操作，这个操作相当于一个<strong>内存屏障</strong>（指令重排序时不能把后面的指令重排序到内存屏障之前的位置），只有一个CPU访问内存时，并不需要内存屏障；（什么是指令重排序：是指CPU采用了允许将多条指令不按程序规定的顺序分开发送给各相应电路单元处理）。</p>
<h3 id="volatile-性能">volatile 性能：</h3>
<p>　　volatile
的读性能消耗与普通变量几乎相同，但是写操作稍慢，因为它需要在本地代码中插入许多内存屏障指令来保证处理器不发生乱序执行。</p>
</blockquote>
<h4 id="浅拷贝和深拷贝">浅拷贝和深拷贝</h4>
<h5 id="浅拷贝">浅拷贝</h5>
<ul class="task-list">
<li><label><input
type="checkbox" />实现方法：通过实现Clonable的接口来进行浅拷贝</label></li>
<li><label><input type="checkbox" />介绍：</label>
<ul>
<li>若拷贝的值为基本数据类型，则拷贝会拷贝一份数据值</li>
<li>若拷贝的值为对象类型，则浅拷贝只会拷贝一份引用，即指向的为相同的对象</li>
</ul></li>
</ul>
<h5 id="深拷贝">深拷贝</h5>
<ul class="task-list">
<li><p><label><input type="checkbox" />实现方法：</label></p>
<ol type="1">
<li><p>通过重写clone函数进行深拷贝：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeepClone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span>,Serializable&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">CopiedClass</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopiedClass</span>();<br>	<br>	<span class="hljs-meta">@Override</span><br>	<span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-type">DeepClone</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		instance = (DeepClone) <span class="hljs-built_in">super</span>.clone();<br>		instance.c = (CopiedClass) c.clone();<br>		<br>		<span class="hljs-keyword">return</span> instance;<br>	&#125;<br>	<br>&#125;<br><br></code></pre></td></tr></table></figure></li>
<li><p>通过序列化实现深拷贝（推荐）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeepClone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span>,Serializable&#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-type">CopiedClass</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopiedClass</span>();<br>	<br>	<span class="hljs-keyword">public</span> DeepClone <span class="hljs-title function_">deepClone</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">DeepClone</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<br>		<span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 序列化</span><br>			bos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<br>			oos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(bos);<br>			oos.writeObject(<span class="hljs-built_in">this</span>);<br>			<br>		   <span class="hljs-comment">// 反序列化</span><br>			bis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(bos.toByteArray());<br>			ois = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(bis);<br>			instance = (DeepClone)ois.readObject();<br>		&#125; <span class="hljs-keyword">catch</span> (ClassNotFoundException e) &#123;<br>			<span class="hljs-comment">// TODO Auto-generated catch block</span><br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			<span class="hljs-comment">// TODO Auto-generated catch block</span><br>			e.printStackTrace();<br>		&#125;<span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-keyword">try</span> &#123;<br>				bos.close();<br>				oos.close();<br>				bis.close();<br>				ois.close();<br>			&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>				<span class="hljs-comment">// TODO Auto-generated catch block</span><br>				e.printStackTrace();<br>			&#125;<br>			<br>		&#125;<br>		<br>		<span class="hljs-keyword">return</span> instance;<br>		<br>		<br>	&#125;<br><br>	<br>&#125;<br><br><span class="hljs-comment">// 注意，待序列化中的所有引用属性都需要进行序列化</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopiedClass</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span>,Serializable&#123;<br>	<br>	String name;<br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">CopiedClass</span><span class="hljs-params">(String name)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>		<span class="hljs-built_in">this</span>.name = name;<br>	&#125;<br>	<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CopiedClass</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>	&#125;<br>	<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException &#123;<br>    	<span class="hljs-comment">// TODO Auto-generated method stub</span><br>    	<span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.clone();<br>    &#125;<br>	<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException &#123;<br>		<span class="hljs-type">CopiedClass</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopiedClass</span>(<span class="hljs-string">&quot;ych&quot;</span>);<br>		<span class="hljs-type">CopiedClass</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> (CopiedClass) a.clone();<br>	&#125;<br>		<br><br>&#125;<br><br><br></code></pre></td></tr></table></figure></li>
</ol></li>
</ul>
<h4 id="iteraior接口">Iteraior接口</h4>
<ul class="task-list">
<li><p><label><input type="checkbox" />接口方法：</label></p>
<ul>
<li>boolean hasNext()</li>
<li>E next()</li>
<li>void remove()</li>
</ul></li>
<li><p><label><input
type="checkbox" />迭代器一般设置成内部类，设置index进行元素的判断，在调用外部类进行内部类的创建</label></p></li>
<li><p><label><input type="checkbox" />```java package
Iterator.MyIterator;</label></p>
<p>import java.util.ArrayList; import java.util.Iterator; import
java.util.List;</p>
<p>public class A { List<B> list = new ArrayList();</p>
<p>public A() { // TODO Auto-generated constructor stub list.add(new
B("66")); list.add(new B("77")); list.add(new B("88"));</p>
<p>}</p>
<p>public Iterator iterator() { return new AIterator(); } // 内部类
class AIterator implements Iterator{</p>
<pre><code>  int index = 0;

  public AIterator() &#123;
      // TODO Auto-generated constructor stub
  &#125;
  @Override
  public boolean hasNext() &#123;
      // TODO Auto-generated method stub
      if(index &lt; list.size())return true;
      return false;
  &#125;
  @Override
  public Object next() &#123;
      // TODO Auto-generated method stub
      return list.get(index++);
  &#125;</code></pre>
<p>}</p>
<p>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>```java<br>package Iterator.MyIterator;<br><br>public class B &#123;<br>	String name;<br>	public B(String name) &#123;<br>		// TODO Auto-generated constructor stub<br>		this.name = name;<br>	&#125;<br>	<br>	public String toString() &#123;<br>		return name;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> Iterator.MyIterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestClass</span> &#123;<br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>		<span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> a.iterator();<br>		<span class="hljs-keyword">while</span>(iterator.hasNext()) &#123;<br>			System.out.println(iterator.next());<br>		&#125;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure></li>
</ul>
<h4 id="jdk-observable源码分析">JDK Observable源码分析</h4>
<ul class="task-list">
<li><label><input
type="checkbox" />采用了观察者模式：但是在JDK实现的该模式中，没有Subject的接口，Observable直接充当了Subject的实现类，完成了对Observer的基本管理（register,remove,notify）</label></li>
<li><label><input
type="checkbox" />Observer即观察者，拥有update的方法</label></li>
<li><label><input
type="checkbox" />Observable和Observer的使用方法和普通的观察者方法中的用法一样，只是Observable不是接口而是类，通过继承实现</label></li>
</ul>
<h4
id="arrays.sort的lambda表达式用法">Arrays.sort的lambda表达式用法</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> &#123;<br>		Integer arr[] = &#123;<span class="hljs-number">9</span>,<span class="hljs-number">6</span>,<span class="hljs-number">3</span>,<span class="hljs-number">8</span>,<span class="hljs-number">5</span>,<span class="hljs-number">2</span>,<span class="hljs-number">7</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>&#125;;<br>		Arrays.sort(arr,(var1,var2) -&gt; &#123;<br>			<span class="hljs-keyword">if</span>(var1.compareTo(var2) &gt; <span class="hljs-number">0</span>)<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>			<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>		&#125;);<br>		<br>		System.out.println(Arrays.toString(arr));<br>		<br>	&#125;<br></code></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://ychhh-1114.github.io">Yue C.H.</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://ychhh-1114.github.io/2022/03/23/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">https://ychhh-1114.github.io/2022/03/23/java%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://ychhh-1114.github.io" target="_blank">Yue C.H. Site</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></div><div class="post_share"><div class="social-share" data-image="/img/a.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/10/21/javaSpring/" title="JavaSpring学习笔记_2022年版"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JavaSpring学习笔记_2022年版</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="Java数据结构梳理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java数据结构梳理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/05/06/Redis%20Note/" title="Redis Note"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-06</div><div class="title">Redis Note</div></div></a></div><div><a href="/2024/05/06/Spring%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3/" title="Annotation Points"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-06</div><div class="title">Annotation Points</div></div></a></div><div><a href="/2022/10/21/javaSpring/" title="JavaSpring学习笔记_2022年版"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-21</div><div class="title">JavaSpring学习笔记_2022年版</div></div></a></div><div><a href="/2024/04/19/ssm_note/" title="SSM踩坑笔记 -（在更中）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-19</div><div class="title">SSM踩坑笔记 -（在更中）</div></div></a></div><div><a href="/2022/03/15/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="Java数据结构梳理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-15</div><div class="title">Java数据结构梳理</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/a.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Yue C.H.</div><div class="author-info__description">去光荣的失败</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Ychhh-1114"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Ychhh-1114" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1325650083@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">设计模式概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9B%AE%E7%9A%84"><span class="toc-number">1.1.</span> <span class="toc-text">设计模式目的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83%E5%A4%A7%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.</span> <span class="toc-text">七大原则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E8%81%8C%E8%B4%A3%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.1.</span> <span class="toc-text">单一职责原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%9A%94%E7%A6%BB%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.2.</span> <span class="toc-text">接口隔离原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%80%92%E8%BD%AC%E5%8E%9F%E5%88%99%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E7%BC%96%E7%A8%8B"><span class="toc-number">1.2.3.</span> <span class="toc-text">依赖倒转原则（面向接口编程）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.4.</span> <span class="toc-text">里氏替换原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E9%97%AD%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.5.</span> <span class="toc-text">开闭原则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99"><span class="toc-number">1.2.6.</span> <span class="toc-text">迪米特法则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%88%E6%88%90%E5%A4%8D%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">1.2.7.</span> <span class="toc-text">合成复用原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uml%E7%B1%BB%E5%9B%BE"><span class="toc-number">1.3.</span> <span class="toc-text">UML类图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.4.1.</span> <span class="toc-text">基本概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.2.</span> <span class="toc-text">单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A5%BF%E6%B1%89%E5%BC%8F"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">饿汉式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%87%92%E6%B1%89%E5%BC%8F"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">懒汉式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E9%87%8D%E6%A3%80%E6%9F%A5"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">双重检查</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-number">1.4.2.4.</span> <span class="toc-text">静态内部类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB"><span class="toc-number">1.4.2.5.</span> <span class="toc-text">枚举类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F%E6%B3%A8%E6%84%8F"><span class="toc-number">1.4.2.6.</span> <span class="toc-text">单例模式注意</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.3.</span> <span class="toc-text">工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.3.1.</span> <span class="toc-text">简单工厂模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.3.2.</span> <span class="toc-text">工厂方法模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.3.3.</span> <span class="toc-text">抽象工厂模式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.4.</span> <span class="toc-text">原型模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.5.</span> <span class="toc-text">建造者模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.6.</span> <span class="toc-text">适配器模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E9%80%82%E9%85%8D%E5%99%A8"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">对象适配器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%80%82%E9%85%8D%E5%99%A8%E7%BC%BA%E7%9C%81%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.6.2.</span> <span class="toc-text">接口适配器（缺省适配器模式）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.7.</span> <span class="toc-text">桥接模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.8.</span> <span class="toc-text">装饰者模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E8%BF%87%E7%A8%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.9.</span> <span class="toc-text">外观模式（过程模式）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%AB%E5%85%83%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.10.</span> <span class="toc-text">享元模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.11.</span> <span class="toc-text">代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.11.1.</span> <span class="toc-text">静态代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86jdk%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.11.2.</span> <span class="toc-text">动态代理（JDK代理）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86cglib%E4%BB%A3%E7%90%86"><span class="toc-number">1.4.11.3.</span> <span class="toc-text">动态代理（CGLIB代理）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%8F%98%E7%A7%8D"><span class="toc-number">1.4.11.4.</span> <span class="toc-text">代理模式的变种</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.12.</span> <span class="toc-text">模板方法模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.12.1.</span> <span class="toc-text">基本模板方法模式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%92%A9%E5%AD%90%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.12.2.</span> <span class="toc-text">钩子方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.13.</span> <span class="toc-text">命令模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.14.</span> <span class="toc-text">访问者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%88%86%E6%B4%BE"><span class="toc-number">1.4.14.1.</span> <span class="toc-text">双分派</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.15.</span> <span class="toc-text">迭代器模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.16.</span> <span class="toc-text">观察者模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E4%BB%8B%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.17.</span> <span class="toc-text">中介者模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%87%E5%BF%98%E5%BD%95%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.18.</span> <span class="toc-text">备忘录模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E9%87%8A%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.19.</span> <span class="toc-text">解释器模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.20.</span> <span class="toc-text">状态模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.21.</span> <span class="toc-text">策略模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%8C%E8%B4%A3%E9%93%BE%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.4.22.</span> <span class="toc-text">职责链模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85"><span class="toc-number">2.</span> <span class="toc-text">补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A2%9E%E5%BC%BA%E8%80%A6%E5%90%88%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">2.0.1.</span> <span class="toc-text">增强耦合的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#volatile%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="toc-number">2.0.2.</span> <span class="toc-text">volatile关键词</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E8%A1%A5%E5%85%85%E4%B8%80%E4%B8%8B%E6%A6%82%E5%BF%B5java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E4%B8%AD%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7%E5%8E%9F%E5%AD%90%E6%80%A7%E5%92%8C%E6%9C%89%E5%BA%8F%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text">先补充一下概念：Java
内存模型中的可见性、原子性和有序性。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E4%B8%80%E4%B8%AA%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%E4%B8%BA-volatile-%E4%B9%8B%E5%90%8E%E5%B0%86%E5%85%B7%E5%A4%87%E4%B8%A4%E7%A7%8D%E7%89%B9%E6%80%A7"><span class="toc-number">2.2.</span> <span class="toc-text">当一个变量定义为
volatile 之后，将具备两种特性：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#volatile-%E6%80%A7%E8%83%BD"><span class="toc-number">2.3.</span> <span class="toc-text">volatile 性能：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.3.1.</span> <span class="toc-text">浅拷贝和深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">浅拷贝</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">深拷贝</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iteraior%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.3.2.</span> <span class="toc-text">Iteraior接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jdk-observable%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">2.3.3.</span> <span class="toc-text">JDK Observable源码分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#arrays.sort%E7%9A%84lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%94%A8%E6%B3%95"><span class="toc-number">2.3.4.</span> <span class="toc-text">Arrays.sort的lambda表达式用法</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/06/Mybatis%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B/" title="Mybatis逆向工程">Mybatis逆向工程</a><time datetime="2024-05-06T12:53:11.000Z" title="发表于 2024-05-06 20:53:11">2024-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/06/Redis%20Note/" title="Redis Note">Redis Note</a><time datetime="2024-05-06T12:51:11.000Z" title="发表于 2024-05-06 20:51:11">2024-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/06/Spring%E7%9B%B8%E5%85%B3%E6%B3%A8%E8%A7%A3/" title="Annotation Points">Annotation Points</a><time datetime="2024-05-06T12:50:11.000Z" title="发表于 2024-05-06 20:50:11">2024-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/05/06/SpringBoot%20Note/" title="SpringBoot Note">SpringBoot Note</a><time datetime="2024-05-06T12:48:11.000Z" title="发表于 2024-05-06 20:48:11">2024-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/04/19/ssm_note/" title="SSM踩坑笔记 -（在更中）">SSM踩坑笔记 -（在更中）</a><time datetime="2024-04-19T10:14:21.000Z" title="发表于 2024-04-19 18:14:21">2024-04-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Yue C.H.</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><div class="aplayer no-destroy" data-id="10046226963" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true" data-lrcType="-1"> </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div></div></body></html>